# Tríptico: Un nuevo algoritmo que protege a los usuarios de Monero

**“Monero oculta al emisor, al receptor y el monto en una transacción. Triptych (pronunciado TRIP-tic) es una actualización para Monero mas rápida, liviana y mucho mas privada.” - 1 de Septiembre, 2020**

Monero oculta al emisor, al receptor y el monto en una transacción, con los detalles detrás de este comportamiento evolutivo y enriquecedor. Este artículo cubre Triptych (Pronunciado TRIP-tic), una nueva tecnología de Monero que esconde mejor a los emisores, utilizando menos espacio en la cadena de bloques de Monero y menos tiempo en el procesamiento. 

### _Firmas de Círculos_

Ocultar a los emisores en Monero es algo más complicado que solo proteger direcciones. Todo Monero está representado en la cadena de bloques como salidas de transacciones, llamadas TXOs. Cada TXO es etiquetado usando un ID único (una sola vez) llamado clave pública (también es llamado una dirección secreta). Con sólo ver en la cadena de bloques de Monero, las claves públicas de una TXO de ninguna manera se pueden conectar a las direcciones de Monero. Sin embargo, las claves públicas por si mismas también necesitan protección. Sería inaceptable que el flujo de Monero entre las claves públicas fuera transparente, considerando que las técnicas fuera de la cadena de bloques podrían conectar esas claves públicas con las personas.

En este momento el movimiento de Monero entre claves públicas se mantiene en secreto utilizando lo que se llaman firmas de círculo criptográfico. Con este enfoque, la clave pública para un TXO real se oculta agrupándola con señuelos (también llamados mixins). Al mirar una transacción, no hay manera de saber si se está utilizando el TXO real o uno de los señuelos. Puede ver ejemplos de entrada y salida de TXOs en un explorador de la cadena de bloques de Monero, como [moneroblocks.info](https://moneroblocks.info/) o [xmrchain.net](https://xmrchain.net/).

La forma en que se seleccionan los señuelos de un TXO desde la cadena de bloques ha mejorado con los años. Inicialmente, como parte incorporada del protocolo, los señuelos eran opcionales. Con el tiempo, el número de señuelos se incrementó y en la actualidad se ha ordenado para dar el requisito de que sean exactamente 10 señuelos. Además, inicialmente en el monedero estándar, los señuelos fueron muestreados al azar uniformemente sobre todas las transacciones. El proceso de muestreo mejoró con el tiempo, basado en la selección de tiempos desde una distribución gamma especial, para dar el proceso aleatorio a medida que tenemos hoy.

Los algoritmos de la firma de círculo central también han mejorado. El documento técnico original de CryptoNote dió un esquema de firma de círculo diferente de la implementación actual mas eficiente basada en firmas de Grupos Anónimos Espontáneos Enlazables Multicapa (MLSAG). Pronto llegará una mejora ampliamente esperada, llamada Firmas de Grupo Compacto Anónimo Espontáneo Vinculable (CLSAG), y se espera que reduzca aún más el tamaño total de la transacción en aproximadamente una cuarta parte y el tiempo de verificación en una décima parte (para un transacción de dos entradas y dos salidas).

Todas estas mejoras le han dado a Monero un poderoso anonimato. Cada vez que se gasta Monero, cada fuente real de un TXO en forma de una clave pública TXO, ya criptográficamente desconectada de la dirección de Monero del emisor, se oculta entre 10 claves públicas señuelo que se eligen para parecerse a posibilidades reales. Esto frustra profundamente la vigilancia, mientras que el software de Monero funciona de manera rápida y sin problemas, dando un tamaño y velocidad de la cadena de bloques razonables.

### _Desafíos_

Pero el ocultamiento del emisor de Monero no es perfecto. Diez señuelos no siempre son suficientes porque algunas TXOs aleatorias podrían ser identificables. Podrían haber sido gastadas previamente con conocimiento público. La existencia de listas negras muestra esto como un problema potencial y ofrece una solución a aquellos que tienen la motivación y la iniciativa para agregar la lista a sus monederos. Y hay otras maneras de identificar señuelos, incluyendo la vinculación de TXO a grupos e intercambios, la estimación de su validez en otras transacciones y el uso de probabilidades de tiempo.

Imagínese una alineación policial con un acusado erróneamente y 10 señuelos. Si todos los señuelos fueran conocidos por un testigo falso, no funcionaría para proteger al acusado. Lo mismo ocurre con las firmas de círculo de Monero: esconderse entre señuelos sólo funciona cuando los señuelos son extraños, y para algunos adversarios, particularmente adversarios ingeniosos, sólo 10 selecciones aleatorias podrían ser inadecuadas. Entonces, ¿por qué no usar más?

Bueno, para el algoritmo MLSAG/CLSAG usado por Monero, tanto el tamaño de la transacción como el tiempo para procesarla crecen linealmente (en el sentido de complejidad computacional de Big O) con el número de señuelos. El uso de diez señuelos equilibra la necesidad de privacidad con la necesidad de una cadena de bloques más pequeña y un procesamiento más rápido. Aumentar el número de señuelos ayudaría con la privacidad, pero también inflaría el tamaño de la transacción de Monero — ya varias veces mas grande que en Bitcoin — y atascaría a los monederos durante la validación.

### _Triptych_

Abordando este desafío está Triptych, un nuevo algoritmo para las firmas de circulo desarrollado por Sarang Noether y Brandon Goodel del Laboratorio de investigación de Monero (MRL por sus siglas en ingles) con un socio externo Arthur Blue (RandomRun). Con triptych, el tamaño de la firma de círculo crece logarítmicamente en lugar de linealmente. El crecimiento logarítmico es muy lento, el patrón de crecimiento más conocido sin tener que recurrir a confiar en que alguien lo use y luego destruya la aleatoriedad durante la configuración (como se hizo para Zcash). En triptych el tiempo de verificación sigue creciendo linealmente con el número de señuelos, pero la verificación se puede agrupar y evaluar utilizando algoritmos especializados lo que proporciona cierta velocidad.

Triptych supera varios desafíos para la aplicación de la firma de criculo a Monero. Proporciona capacidad de vinculación. La técnica de firma de círculo de Monero debe bloquear la reutilización de claves públicas legítimas para evitar gastar una TXO más de una vez (el llamado doble gasto). Triptych hace esto usando etiquetas de enlace que son similares a las claves de imagen de hoy. Triptych también admite el uso de transacciones confidenciales para ocultar las cantidades en Monero. Los datos especiales llamados claves de compromiso permiten probar que las cantidades de Monero en una transacción son legítimas sin revelar esas cantidades. Estas claves de compromiso con las claves de firma y las etiquetas de enlace son los tres componentes que originan el nombre Triptych, lo qe significa algo de tres partes. 

### _Pruebas y alternativas_

Triptych corre rápido en la práctica. Uno de los creadores, Sarang Noether, informó que el código de prueba da una notable mejora en el tiempo de ejecución. Aproximadamente, usando 63 señuelos con Tríptico funciona un 10% más rápido que usando 10 señuelos con CLSAG. Estos resultados indican una mejora fundamental para Monero que también será pracitca en el campo. 

Sin embargo, aún queda trabajo, ya que se necesita una validación rigurosa para que un nuevo algoritmo como Triptych pueda entrar en el código base de Monero. Aunque el documento del algoritmo de Triptych ha sido revisado por pares (y aceptado en el Taller ESORICS CBT 2020), Triptych todavía puede beneficiarse de la modificación de los algoritmos y el software que implementa esos algoritmos, y la implementación puede optimizarse aún más para reducir el tiempo de validación. Dedicar este esfuerzo a Triptych reemplaza el trabajo en otras alternativas.

Una de esas alternativas, particularmente prometedora, es una versión avanzada del mismo Triptych llamada Arcturus, desarrollada por Sarang Noether. Arcturus reduce aún más el tamaño de la transacción utilizando un solo paquete de datos de firma criptográfica para toda la transacción en lugar de uno para cada TXO de entrada. Arcturus y Triptych tienen tiempos de verificación comparables. El precio del tamaño reducido es un algoritmo en Arcturus que requiere suposiciones matemáticas que no son necesarias para Triptych.

### _En resumen_

Con Triptych, y su extensión Arcturus, Monero tiene una gran nueva tecnología con el potencial de reducir el tamaño de los datos de la firma de círculo de crecer linealmente (con el número de señuelos utilizados para ocultar al emisor) a crecer logarítmicamente. Si se adopta, podría permitir que el número de señuelos aumente sin aumentar el tamaño de la cadena de bloques o el uso de CPU en la validación. La tecnología de Tríptico continúa el incesante progreso de Monero en manifestar lo posible y proteger la privacidad y libertad de sus usuarios.
